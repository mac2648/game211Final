(()=>{"use strict";var t,e={778:(t,e,s)=>{var i=s(260),a=s.n(i);class r extends a().Scene{constructor(t,e){super(e),this.config=t,this.fontOptions={fontSize:"32px",fill:"#FFFFFF"},this.lineDistance=42}create(){if(this.add.image(0,-500,"backGround").setOrigin(0,0).setScale(2.5),this.config.canGoBack){this.add.image(this.config.width-10,this.config.height-10,"back").setScale(2).setOrigin(1,1).setInteractive().on("pointerdown",(()=>{this.scene.start("menuScene")}))}}createMenu(t,e){let s=0;t.forEach((t=>{const i=[this.config.width/2,this.config.height/2+s];t.textGO=this.add.text(...i,t.text,this.fontOptions).setOrigin(.5,1),s+=this.lineDistance,e(t)}))}}const h=r;const n=class extends h{constructor(t){super(t,"playScene"),this.player=null,this.platforms=null,this.PLATFORMS_TO_RENDER=4,this.platformVerticalDistanceRange=[250,300],this.platformHorizontalDistanceRange=[85,100],this.score=0,this.scoreText="",this.keyA=null,this.keyD=null,this.keyW=null,this.keyS=null,this.InitialPlatform=null,this.initialVelocity=100,this.currentPlatformVelocity=this.initialVelocity,this.PlayerGravity=500,this.PlayerJumpSpeed=-500,this.starExist=!1,this.star=null,this.timeForStar=!0}create(){super.create(),this.resetValues(),this.createInitialPlatform(),this.createAnims(),this.createPlayer(),this.createPlatforms(),this.createColiders(),this.createScore(),this.createEventHandler(),this.createPauseButton(),this.listenToEvents()}update(){this.keyA.isDown?(this.player.setVelocityX(-350),this.player.anims.play("left",!0)):this.keyD.isDown?(this.player.setVelocityX(350),this.player.anims.play("right",!0)):(this.player.setVelocityX(0),this.player.anims.play("turn")),this.keyS.isDown&&this.player.setVelocityY(1e3),this.keyW.isDown&&this.player.body.touching.down&&this.player.setVelocityY(this.PlayerJumpSpeed),this.star.y>this.config.height&&(this.starExist=!1),this.checkCollision(),this.recyclePlatforms()}createAnims(){this.anims.create({key:"left",frames:this.anims.generateFrameNumbers("knight",{start:0,end:4}),frameRate:10,repeat:-1}),this.anims.create({key:"turn",frames:[{key:"knight",frame:5}],frameRate:20}),this.anims.create({key:"right",frames:this.anims.generateFrameNumbers("knight",{start:5,end:9}),frameRate:10,repeat:-1})}resetValues(){this.player=null,this.platforms=null,this.score=0,this.scoreText="",this.InitialPlatform=null,this.initialVelocity=100,this.currentPlatformVelocity=this.initialVelocity,this.PlayerGravity=500,this.PlayerJumpSpeed=-500,this.starExist=!0,this.star=this.physics.add.sprite(Phaser.Math.Between(1,this.config.width),0,"star"),this.star.setVelocityX(0),this.star.setVelocityY(this.currentPlatformVelocity),this.timeForStar=!1}createPauseButton(){this.add.image(this.config.width-10,this.config.height-10,"pause").setScale(2).setOrigin(1,1).setInteractive().on("pointerdown",(()=>{this.physics.pause(),this.scene.pause(),this.scene.launch("pauseScene")}))}createInitialPlatform(){this.InitialPlatform=this.physics.add.sprite(0,19*this.config.height/20,"platform").setScale(3).setImmovable(!0).refreshBody(),this.InitialPlatform.setVelocityY(40)}createPlayer(){this.player=this.physics.add.sprite(...this.config.startPos,"knight").setCollideWorldBounds(!0).setScale(1.5),this.player.body.gravity.y=this.PlayerGravity}createPlatforms(){this.platforms=this.physics.add.group();for(let t=0;t<this.PLATFORMS_TO_RENDER;t++){let t=this.platforms.create(this.config.width/10,9*this.config.height/10,"platform").setOrigin(1,1).setImmovable(!0),e=this.platforms.create(this.config.width/10,9*this.config.height/10,"platform").setOrigin(0,1).setImmovable(!0);this.placePlatform(t,e)}this.platforms.setVelocityY(this.initialVelocity)}createScore(){this.score=0;const t=localStorage.getItem("bestScore");this.scoreText=this.add.text(16,16,`Score: ${this.score}`,{fontSize:"32px",fill:"#fff"}),this.add.text(16,52,`highest score: ${t||0}`,{fontSize:"18px",fill:"#fff"})}createEventHandler(){this.keyA=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.A),this.keyD=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.D),this.keyW=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.W),this.keyS=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.S)}placePlatform(t,e,s=!1){let i=Phaser.Math.Between(...this.platformVerticalDistanceRange),a=Phaser.Math.Between(...this.platformHorizontalDistanceRange),r=Phaser.Math.Between(30,this.config.width-30-a);t.x=r,t.y=this.getUpMostPlatform()-i,e.x=t.x+a,e.y=t.y,s&&!this.starExist&&this.timeForStar&&(this.star.enableBody(!0,Phaser.Math.Between(1,this.config.width),t.y-40,!0,!0),this.star.setVelocityX(0),this.star.setVelocityY(this.currentPlatformVelocity),this.timeForStar=!1,this.starExist=!0)}playerGetStar(){this.star.disableBody(!0,!0),this.starExist=!1,this.increaseScore(),this.star.disableBody(!0,!0),this.NextStarTimer=15,this.StarEvent=this.time.addEvent({delay:1e3,callback:this.StarCountDown,callbackScope:this,loop:!0})}getUpMostPlatform(){let t=this.config.height;return this.platforms.getChildren().forEach((function(e){t=Math.min(e.y,t)})),t}saveBestScore(){const t=localStorage.getItem("bestScore"),e=t&&parseInt(t,10);(!e||this.score>e)&&localStorage.setItem("bestScore",this.score)}gameOver(){this.player.setTint(16711680),this.physics.pause(),this.saveBestScore(),this.time.addEvent({delay:1e3,callback:()=>{localStorage.setItem("lastScore",this.score),this.scene.start("finalScoreScene")},loop:!1})}recyclePlatforms(){let t=[];this.platforms.getChildren().forEach((e=>{e.getBounds().top>=this.config.height&&(t.push(e),2===t.length&&(this.placePlatform(...t,!0),this.increaseScore(),this.score%8==0&&(this.currentPlatformVelocity+=20,this.platforms.setVelocityY(this.currentPlatformVelocity))))}))}checkCollision(){this.player.getBounds().bottom>=this.config.height&&this.gameOver()}createColiders(){this.physics.add.collider(this.player,this.platforms),this.physics.add.collider(this.player,this.InitialPlatform),this.physics.add.collider(this.star,this.platforms),this.physics.add.collider(this.star,this.player,this.playerGetStar,null,this)}increaseScore(){this.score++,this.scoreText.setText(`Score: ${this.score}`),this.saveBestScore()}listenToEvents(){this.pauseEvent||(this.pauseEvent=this.events.on("resume",(()=>{this.initialTime=3,this.countDownText=this.add.text(this.config.width/2,this.config.height/2,"go in "+this.initialTime,this.fontOptions).setOrigin(.5),this.timedEvent=this.time.addEvent({delay:1e3,callback:this.countDown,callbackScope:this,loop:!0})})))}StarCountDown(){this.NextStarTimer--,this.NextStarTimer<=0&&(this.timeForStar=!0,this.StarEvent.remove())}countDown(){this.initialTime--,this.countDownText.setText(`go in ${this.initialTime}`),this.initialTime<=0&&(this.countDownText.setText(""),this.isPaused=!1,this.physics.resume(),this.timedEvent.remove())}};class o extends a().Scene{constructor(){super("preloadScene")}preload(){this.load.image("backGround","assets/BrickWall.png"),this.load.spritesheet("knight","assets/knight.png",{frameWidth:28,frameHeight:26}),this.load.image("platform","assets/genericPlatform.png"),this.load.image("pause","assets/pause.png"),this.load.image("back","assets/back.png"),this.load.image("star","assets/star.png")}create(){this.scene.start("menuScene")}}const c=o;const l=class extends h{constructor(t){super(t,"menuScene"),this.menu=[{scene:"playScene",text:"Play"},{scene:"scoreScene",text:"Score"},{scene:null,text:"Exit"}]}create(){super.create(),this.createMenu(this.menu,this.setupMenuEvents.bind(this))}setupMenuEvents(t){const e=t.textGO;e.setInteractive(),e.on("pointerover",(()=>{e.setStyle({fill:"#FF0"})})),e.on("pointerout",(()=>{e.setStyle({fill:"#FFF"})})),e.on("pointerup",(()=>{t.scene&&this.scene.start(t.scene),"Exit"===t.text&&this.game.destroy(!0)}))}};const p=class extends h{constructor(t){super({...t,canGoBack:!0},"scoreScene")}create(){super.create(),this.createText()}createText(){const t=localStorage.getItem("bestScore");this.add.text(this.config.width/2,this.config.height/2,`highest score is: ${t||0}`,this.fontOptions).setOrigin(.5,1)}};const d=class extends h{constructor(t){super(t,"pauseScene"),this.menu=[{scene:"playScene",text:"Continue"},{scene:"menuScene",text:"Exit"}]}create(){super.create(),this.createMenu(this.menu,this.setupMenuEvents.bind(this))}setupMenuEvents(t){const e=t.textGO;e.setInteractive(),e.on("pointerover",(()=>{e.setStyle({fill:"#FF0"})})),e.on("pointerout",(()=>{e.setStyle({fill:"#FFF"})})),e.on("pointerup",(()=>{t.scene&&"Continue"===t.text?(this.scene.stop(),this.scene.resume(t.scene)):(this.scene.stop("playScene"),this.scene.start(t.scene))}))}};const m={width:450,height:800,startPos:[225,680]},y=[c,l,p,n,d,class extends h{constructor(t){super({...t,canGoBack:!1},"finalScoreScene")}create(){super.create(),this.createText()}createText(){const t=localStorage.getItem("lastScore");this.add.text(this.config.width/2,this.config.height/2,`your score was ${t}`,this.fontOptions).setOrigin(.5,1),this.restartGame=this.add.text(this.config.width/2,3*this.config.height/4,"restart",{fontSize:"24px",fill:"#FFFFFF"}).setOrigin(.5,1),this.restartGame.setInteractive(),this.restartGame.on("pointerover",(()=>{this.restartGame.setStyle({fill:"#FF0"})})),this.restartGame.on("pointerout",(()=>{this.restartGame.setStyle({fill:"#FFF"})})),this.restartGame.on("pointerdown",(()=>{this.scene.start("playScene")})),this.exitGame=this.add.text(this.config.width/2,7*this.config.height/8,"exit",{fontSize:"24px",fill:"#FFFFFF"}).setOrigin(.5,1),this.exitGame.setInteractive(),this.exitGame.on("pointerover",(()=>{this.exitGame.setStyle({fill:"#FF0"})})),this.exitGame.on("pointerout",(()=>{this.exitGame.setStyle({fill:"#FFF"})})),this.exitGame.on("pointerdown",(()=>{this.scene.start("menuScene")}))}}],f=t=>new t(m),u={type:a().AUTO,...m,physics:{default:"arcade",arcade:{debug:!1}},scene:y.map(f)};new(a().Game)(u)}},s={};function i(t){var a=s[t];if(void 0!==a)return a.exports;var r=s[t]={exports:{}};return e[t].call(r.exports,r,r.exports,i),r.exports}i.m=e,t=[],i.O=(e,s,a,r)=>{if(!s){var h=1/0;for(l=0;l<t.length;l++){for(var[s,a,r]=t[l],n=!0,o=0;o<s.length;o++)(!1&r||h>=r)&&Object.keys(i.O).every((t=>i.O[t](s[o])))?s.splice(o--,1):(n=!1,r<h&&(h=r));if(n){t.splice(l--,1);var c=a();void 0!==c&&(e=c)}}return e}r=r||0;for(var l=t.length;l>0&&t[l-1][2]>r;l--)t[l]=t[l-1];t[l]=[s,a,r]},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var s in e)i.o(e,s)&&!i.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={143:0};i.O.j=e=>0===t[e];var e=(e,s)=>{var a,r,[h,n,o]=s,c=0;if(h.some((e=>0!==t[e]))){for(a in n)i.o(n,a)&&(i.m[a]=n[a]);if(o)var l=o(i)}for(e&&e(s);c<h.length;c++)r=h[c],i.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return i.O(l)},s=self.webpackChunkphaser_webpack_boilerplate=self.webpackChunkphaser_webpack_boilerplate||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var a=i.O(void 0,[736],(()=>i(778)));a=i.O(a)})();